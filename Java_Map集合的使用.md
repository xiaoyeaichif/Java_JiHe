# Javaé›†åˆMapæ¥å£çš„å®ç°å‡½æ•°ä½¿ç”¨ã€‚

## ä¸€ï¼šHashMapçš„ä½¿ç”¨(æ”¯æŒéšæœºè®¿é—®)

### 1ï¼šåº•å±‚ç»“æ„ï¼ˆå“ˆå¸Œè¡¨çš„å½¢å¼ï¼‰

- æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘

### 2ï¼šæ‰©å®¹æœºåˆ¶

- åˆå§‹åŒ–æ—¶ï¼Œå®¹é‡ä¸º0ã€‚å½“æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ åŠ å…¥ä¹‹åï¼Œå®¹é‡æ‰©å¼ åˆ°16ã€‚

- å½“HashMapçš„å®¹é‡è¾¾åˆ°75%ï¼ˆé»˜è®¤ï¼‰çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ‰©å®¹ã€‚è¿™é‡ŒæŒ‡çš„æ˜¯ä¸€æ—¦HashMapçš„å®¹é‡åˆ°è¾¾ç»™å®šå®¹é‡çš„0.75æ—¶å°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚æ¯”å¦‚ç»™å®šå®¹é‡ä¸º16ï¼Œé‚£ä¹ˆä¸€æ—¦hashMapä¸­æœ‰12ä¸ªå…ƒç´ ï¼Œå†åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šæ‰©å®¹ã€‚
  
- é“¾è¡¨çš„æ‰©å®¹ï¼Œå½“é“¾è¡¨çš„é•¿åº¦è¾¾åˆ°8çš„æ—¶å€™ï¼Œæ­¤æ—¶ä¼šæ£€æŸ¥æ•°ç»„çš„é•¿åº¦æ˜¯ä¸æ˜¯å¤§äºç­‰äº64ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼šä¼˜å…ˆå¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹ã€‚ä¸€æ—¦æ•°ç»„çš„é•¿åº¦å¤§äºç­‰äº64ï¼Œé‚£ä¹ˆæ­¤æ—¶é“¾è¡¨ä¼šå˜æˆçº¢é»‘æ ‘ç»“æ„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦çº¢é»‘æ ‘ä¸­ä¸­çš„å…ƒç´ å°äºç­‰äº6çš„æ—¶å€™ï¼Œä¼šèœ•åŒ–é“¾è¡¨ç»“æ„ã€‚

### 3ï¼šå¸¸è§çš„æˆå‘˜å‡½æ•°

#### 3.1ï¼šæ·»åŠ å…ƒç´ ï¼ˆå¢åŠ å…ƒç´ ï¼‰

1)ï¼šV put(K key, V value) æ·»åŠ å…ƒç´ ï¼ˆå¢åŠ å…ƒç´ ï¼‰

- **â€‹æ— è®ºé”®æ˜¯å¦å­˜åœ¨éƒ½ä¼šæ‰§è¡Œæ’å…¥**

- **é”®å­˜åœ¨æ—¶ï¼š**
  - ç”¨æ–°å€¼**è¦†ç›–**æ—§å€¼
  - **â€‹è¿”å›è¢«è¦†ç›–çš„æ—§å€¼**
- **é”®ä¸å­˜åœ¨æ—¶ï¼š**
  - æ–°å»ºæ˜ å°„å…³ç³»
  - è¿”å› nullï¼ˆä¹Ÿå°±æ˜¯è¿”å›æ—§å€¼ï¼‰

**â€‹ç¤ºä¾‹â€‹ï¼š**

```Java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);    // è¿”å› nullï¼ˆæ–°å¢ï¼‰
map.put("apple", 2);    // è¿”å› 1ï¼ˆè¦†ç›–ï¼‰
```

2)ï¼šV putIfAbsent(K key, V value)

- **åªæœ‰å½“é”®ä¸å­˜åœ¨æ—¶å€™æ‰ä¼šæ‰§è¡Œæ’å…¥**

- é”®å­˜åœ¨æ—¶ï¼š
  - **ä¸ä¿®æ”¹**ç°æœ‰é”®å¯¹åº”çš„å€¼
  - **â€‹è¿”å›å·²ç»å­˜åœ¨çš„å€¼**
- é”®ä¸å­˜åœ¨æ—¶
  - æ–°å»ºæ˜ å°„å…³ç³»
  - è¿”å› null

**â€‹ç¤ºä¾‹â€‹ï¼š**

```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);         // è¿”å› nullï¼ˆæ–°å¢ï¼‰
map.putIfAbsent("apple", 2); // è¿”å› 1ï¼ˆæœªè¦†ç›–ï¼‰
map.get("apple");            // ä»ç„¶æ˜¯ 1
```

#### 3.2ï¼šç§»é™¤å…ƒç´ ï¼ˆåˆ é™¤å…ƒç´ ï¼‰

1): void remove(Object key) æ ¹æ®é”®åˆ é™¤å…ƒç´ 

**ç¤ºä¾‹**:

```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);
// ä½¿ç”¨getæ–¹æ³•è·å–appleå¯¹åº”çš„å€¼
System.out.println(map.get("apple")); // è¾“å‡ºä¸º1
// ä½¿ç”¨removeæ–¹æ³•åˆ é™¤appleå¯¹åº”çš„å€¼
map.remove("apple");
System.out.println(map.get("apple")); // è¾“å‡ºä¸ºnull
```

2): boolean remove(Object key, Object value) æ ¹æ®é”®å€¼å¯¹åˆ é™¤å…ƒç´ 

**ç¤ºä¾‹**:

```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);
// ä½¿ç”¨getæ–¹æ³•è·å–appleå¯¹åº”çš„å€¼
System.out.println(map.get("apple")); // è¾“å‡ºä¸º1
// ä½¿ç”¨removeæ–¹æ³•åˆ é™¤appleå¯¹åº”çš„å€¼
var hasAchieve = map.remove("apple",1);
System.out.println(hasAchieve); // è¾“å‡ºä¸ºnull
```

3): void clear()

**ç¤ºä¾‹**:

```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);
// ä½¿ç”¨getæ–¹æ³•è·å–appleå¯¹åº”çš„å€¼
System.out.println(map.size()); // è¾“å‡ºä¸º1
map.clear();
System.out.println(map.size()); // è¾“å‡ºä¸º0
```

#### 3.3ï¼šè®¾ç½®å…ƒç´ ï¼ˆä¿®æ”¹å…ƒç´ ï¼‰

1): putå‡½æ•°å°±æœ‰ä¿®æ”¹å€¼çš„ä½œç”¨ï¼ŒputIfAbsentå‡½æ•°ä¹Ÿæœ‰ä¿®æ”¹å€¼çš„ä½œç”¨ã€‚

2): V replace(K key, V value) æ ¹æ®é”®å€¼å¯¹ä¿®æ”¹å…ƒç´ 

- **â€‹åŠŸèƒ½**â€‹ï¼šæ›¿æ¢æŒ‡å®š key çš„ valueï¼ˆä»…å½“ key å­˜åœ¨æ—¶ï¼‰
- **è¿”å›å€¼**ï¼š
  - å¦‚æœ key å­˜åœ¨ï¼šè¿”å›è¢«æ›¿æ¢çš„æ—§å€¼
  - valueï¼šå¦‚æœ key ä¸å­˜åœ¨ï¼šè¿”å› nullï¼ˆä¹Ÿå°±æ˜¯è¿”å›æ—§å€¼ï¼‰
  
**ç¤ºä¾‹**:

```Java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 10);
Integer oldValue = map.replace("apple", 20); // è¿”å› 10
System.out.println(map.get("apple")); // è¾“å‡º 20
Integer result = map.replace("banana", 30); // è¿”å› nullï¼ˆkeyä¸å­˜åœ¨ï¼‰
```


#### 3.4ï¼šè·å–å…ƒç´ ï¼ˆæŸ¥çœ‹å…ƒç´ ï¼‰

1): V get(Object key) æ ¹æ®é”®è·å–å€¼ï¼ˆé”®ä¸å­˜åœ¨è¿”å›nullï¼‰
  
**ç¤ºä¾‹**:

```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 1);
// ä½¿ç”¨getæ–¹æ³•è·å–appleå¯¹åº”çš„å€¼
System.out.println(map.get("apple")); // è¾“å‡ºä¸º1
```

2): V getOrDefault(Object key, V defaultValue) æ ¹æ®é”®è·å–å€¼ï¼ˆé”®ä¸å­˜åœ¨è¿”å›é»˜è®¤å€¼ï¼Œå¥å­˜åœ¨åˆ™è¿”å›å¯¹åº”çš„å€¼ï¼‰

**æ³¨æ„**ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ç»Ÿè®¡è¯é¢‘çš„æ—¶å€™ç”¨çš„æ¯”è¾ƒå¤šã€‚
**ç¤ºä¾‹**:

```java
// ç»Ÿè®¡è¯é¢‘
        String [] str = {"hello","world","hello","hello","hello","world","world","world"};
        // ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡strä¸­è¯é¢‘
        HashMap<String, Integer> hashMap1 = new HashMap<>();
        for(int i = 0;i < str.length;i++){
            String key = str[i];
            // è¿™é‡Œè¿˜åˆ©ç”¨åˆ°putå‡½æ•°çš„ç›¸åŒkeyè¦†ç›–
            hashMap1.put(key,hashMap1.getOrDefault(key,0)+1);
        }
        System.out.println(hashMap1); // è¾“å‡ºä¸ºï¼š{world=4, hello=4}

/*
    C++å®ç°æ¯”è¿™ä¸ªç®€å•ä¸€ç‚¹
    vector<string>str = {"hello","world","hello","hello","hello","world","world","world"};
    // ç”Ÿæˆå“ˆå¸Œè¡¨
    unordered_map<string,int>hashMap;
    for(int i = 0;i < str.size();i++){
        hashMap[str[i]]++;
    }
*/
```

**ç¤ºä¾‹**:

```java
HashMap<Object, Object> hashMap = new HashMap<>();
hashMap.put("yyy",1023);
// æµ‹è¯•getOrDefaultå‡½æ•°
// æŸ¥æ‰¾é”®ä¸ºnihaoçš„å€¼ï¼Œå¦‚æœhashMapä¸­ä¸å­˜åœ¨è¿™ä¸ªé”®ï¼Œåˆ™è¿”å›é»˜è®¤å€¼1
Object object = hashMap.getOrDefault("nihao", 1);
System.out.println(object); // è¾“å‡ºä¸º1
```

3): containsKey(Object key) åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ 

**ç¤ºä¾‹**:

```java
HashMap<Object, Object> hashMap = new HashMap<>();
hashMap.put("hello",1023);
var isExist = hashMap1.containsKey("hello");
System.out.println(isExist); // true
```

4): boolean containsValue(Object value) åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨

```java
HashMap<Object, Object> hashMap = new HashMap<>();
hashMap.put("hello",1023);
var isExist = hashMap1.containsValue(1023);
System.out.println(isExist); //true
```

### 4ï¼šæ“ä½œæ˜¯å¦çº¿ç¨‹å®‰å…¨

**HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œæ—¶ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ï¼ï¼**

## äºŒï¼šHashTableçš„ä½¿ç”¨ï¼ˆä¸èƒ½åŠ å…¥nullçš„é”®å€¼å¯¹ï¼‰

### 1ï¼šåº•å±‚ç»“æ„

- æ•°ç»„ + é“¾è¡¨

### 2ï¼šæ‰©å®¹æœºåˆ¶

- åˆå§‹åŒ–æ—¶å®¹é‡ä¸º0ï¼Œå½“åŠ å…¥ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå®¹é‡æ‰©å±•åˆ°11.é˜ˆå€¼å¤§å°ä¹Ÿæ˜¯0.75

-  å½“å®¹é‡åˆ°è¾¾11 * 0.75 = 8æ—¶ï¼Œè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ‰©å®¹çš„æœºåˆ¶ä¸º2*æ—§å®¹é‡+1ã€‚æ¯”å¦‚åˆå§‹å®¹é‡ä¸º11ï¼Œæ‰©å®¹ä¹‹åå°±æ˜¯23ã€‚

- HashTableæ²¡æœ‰åƒHashMapä¸€æ ·ï¼Œé“¾è¡¨åˆ°è¾¾æŒ‡å®šå¤§å°ä¹‹åå˜æˆçº¢é»‘æ ‘ã€‚

### 3ï¼šå¸¸è§çš„æˆå‘˜å‡½æ•°


## HashTable ä¸ HashMap æ“ä½œæ¥å£å¯¹æ¯”

| æ“ä½œ | æ–¹æ³•å      | æ˜¯å¦é‡å†™   | å·®å¼‚                      |
| -- | -------- | ------ | ----------------------- |
| æ·»åŠ  | `put`    | âœ… æ˜¯    | ç»´æŠ¤é¡ºåºé“¾è¡¨                  |
| åˆ é™¤ | `remove` | âœ… æ˜¯    | åŒæ­¥æ›´æ–°é“¾è¡¨                  |
| ä¿®æ”¹ | `put`    | âœ… æ˜¯    | é¡ºåºä¸å˜                    |
| æŸ¥è¯¢ | `get`    | âŒ è°ƒç”¨é’©å­ | æ›´æ–°è®¿é—®é¡ºåºï¼ˆå¦‚è®¾ç½® accessOrderï¼‰ |

**æ³¨æ„**ï¼š
- HashTableä¸èƒ½åŠ å…¥nullçš„é”®å€¼å¯¹ï¼ŒHashMapå¯ä»¥åŠ å…¥nullçš„é”®å€¼å¯¹ã€‚

### 4ï¼šæ“ä½œæ˜¯å¦çº¿ç¨‹å®‰å…¨

**HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œæ—¶ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ï¼ï¼**

## ä¸‰ï¼šLinkedHashMapçš„ä½¿ç”¨(ä¸æ”¯æŒéšæœºè®¿é—®)

### 1ï¼šåº•å±‚ç»“æ„

- æ•°ç»„ + åŒå‘é“¾è¡¨

### 2ï¼šæ‰©å®¹æœºåˆ¶

- LinkedHashMap çš„æ‰©å®¹æœºåˆ¶å…¶å®æ˜¯ **ç»§æ‰¿è‡ªHashMap**çš„ï¼Œå®ƒå¹¶æ²¡æœ‰è‡ªå·±å®ç°æ–°çš„æ‰©å®¹é€»è¾‘ï¼Œåªæ˜¯åœ¨ HashMap çš„åŸºç¡€ä¸Šå¢åŠ äº†åŒå‘é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼ˆæˆ–è®¿é—®é¡ºåºï¼‰ã€‚å¦å¤–éœ€è¦æ³¨æ„ï¼Œ**LinkedHashMapä¸ä¼šæ‰©å®¹æ—¶ä¸ä¼šå˜æˆçº¢é»‘æ ‘ï¼ï¼ï¼ï¼**

### 3ï¼šå¸¸è§çš„æˆå‘˜å‡½æ•°

| æ“ä½œ | HashMap æ–¹æ³• | LinkedHashMap æ–¹æ³• | æ˜¯å¦é‡å†™ | å·®å¼‚è¯´æ˜ |
|------|---------------|----------------------|-----------|-----------|
| å¢åŠ  | `put(K key, V value)` | `put(K key, V value)` | âœ… é‡å†™ | æ·»åŠ å…ƒç´ åï¼Œç»´æŠ¤æ’å…¥/è®¿é—®é¡ºåºé“¾è¡¨ |
| åˆ é™¤ | `remove(Object key)` | `remove(Object key)` | âœ… é‡å†™ | åˆ é™¤èŠ‚ç‚¹åŒæ—¶ç§»é™¤é“¾è¡¨ä¸­çš„å¯¹åº”ä½ç½® |
| ä¿®æ”¹ | `put(K key, V value)` | `put(K key, V value)` | âœ… é‡å†™ | è¦†ç›–æ—§å€¼æ—¶ï¼Œé¡ºåºä»ä¿æŒä¸å˜ï¼ˆæ’å…¥é¡ºåºï¼‰ |
| æŸ¥è¯¢ | `get(Object key)`     | `get(Object key)`     | âŒ æœªé‡å†™ï¼ˆä½†è°ƒç”¨é¡ºåºç›¸å…³é’©å­ï¼‰ | è‹¥è®¾ç½® accessOrder=trueï¼Œä¼šåœ¨å†…éƒ¨æ›´æ–°è®¿é—®é¡ºåº |

### 4ï¼šæ“ä½œæ˜¯å¦çº¿ç¨‹å®‰å…¨

- **çº¿ç¨‹ä¸å®‰å…¨**

## å››ï¼šTreeMapçš„ä½¿ç”¨ï¼ˆæœ€ç‰¹æ®Šçš„ï¼Œåº•å±‚å®ç°é‡‡ç”¨çº¢é»‘æ ‘å®ç°ï¼‰

### 1ï¼šåº•å±‚ç»“æ„

- ä½¿ç”¨çš„æ˜¯çº¢é»‘æ ‘ï¼Œå’Œä¸Šè¿°ä¸‰ç§Mapçš„åº•å±‚ç»“æ„æ˜¯ä¸ä¸€æ ·çš„ï¼

**ğŸ§¬ TreeMap çš„ç»“æ„ç‰¹ç‚¹ï¼š**

| ç‰¹æ€§      | æè¿°                          |
| ------- | --------------------------- |
| åº•å±‚ç»“æ„    | çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼‰              |
| æ’å…¥æ“ä½œ    | ä¼šè‡ªåŠ¨å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°çº¢é»‘æ ‘æ­£ç¡®ä½ç½®ï¼Œå¹¶è¿›è¡Œæ—‹è½¬ç»´æŒå¹³è¡¡ |
| æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ | O(logN)                     |
| æ— éœ€æ‰©å®¹    | å› ä¸ºæ ‘ç»“æ„å¤©ç„¶æ˜¯æŒ‰èŠ‚ç‚¹é“¾æ¥ï¼Œä¸å­˜åœ¨â€œå®¹é‡é™åˆ¶â€     |


### 2ï¼šæ‰©å®¹æœºåˆ¶

- **â—TreeMap æ²¡æœ‰â€œæ‰©å®¹æœºåˆ¶â€ï¼Œå› ä¸ºå®ƒä¸æ˜¯åŸºäºæ•°ç»„æˆ–å“ˆå¸Œè¡¨å®ç°çš„ï¼**

### 3ï¼šå¸¸è§çš„æˆå‘˜å‡½æ•°

| æ“ä½œ | HashMap æ–¹æ³• | TreeMap æ–¹æ³• | æ˜¯å¦é‡å†™ | å·®å¼‚è¯´æ˜ |
|------|--------------|---------------|-----------|----------|
| å¢åŠ  | `put(K key, V value)` | `put(K key, V value)` | âœ… é‡å†™ï¼ˆè‡ªå·±å®ç°ï¼‰ | TreeMap ä½¿ç”¨çº¢é»‘æ ‘æ’å…¥ï¼Œè‡ªåŠ¨æ’åºï¼ˆæŒ‰ keyï¼‰ |
| åˆ é™¤ | `remove(Object key)`  | `remove(Object key)`  | âœ… é‡å†™ï¼ˆè‡ªå·±å®ç°ï¼‰ | TreeMap åœ¨çº¢é»‘æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹ï¼Œéœ€ç»´æŠ¤å¹³è¡¡ |
| ä¿®æ”¹ | `put(K key, V value)` | `put(K key, V value)` | âœ… é‡å†™ï¼ˆåŒä¸Šï¼‰     | è‹¥ key å­˜åœ¨ï¼Œè¦†ç›–æ—§å€¼ï¼Œä½ç½®ä¸å˜ï¼ˆä»æœ‰åºï¼‰ |
| æŸ¥è¯¢ | `get(Object key)`     | `get(Object key)`     | âœ… é‡å†™ï¼ˆè‡ªå·±å®ç°ï¼‰ | TreeMap é€šè¿‡çº¢é»‘æ ‘æŒ‰ key æŸ¥æ‰¾ï¼Œæ•ˆç‡ O(logN) |


### 4ï¼šæ“ä½œæ˜¯å¦çº¿ç¨‹å®‰å…¨

- **çº¿ç¨‹ä¸å®‰å…¨**

## äº”ï¼šå››ç§ Map å®ç°å¯¹æ¯”æ€»è§ˆ


| ç‰¹æ€§            | HashMap     | Hashtable | LinkedHashMap | TreeMap  |
| ------------- | ----------- | --------- | ------------- | -------- |
| åº•å±‚ç»“æ„          | æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ | æ•°ç»„ + é“¾è¡¨   | æ•°ç»„ + åŒå‘é“¾è¡¨     | çº¢é»‘æ ‘      |
| æ˜¯å¦æœ‰åº          | å¦           | å¦         | æ˜¯ï¼ˆæ’å…¥é¡ºåºï¼‰       | æ˜¯ï¼ˆkeyæ’åºï¼‰ |
| æ˜¯å¦çº¿ç¨‹å®‰å…¨        | å¦           | âœ… æ˜¯       | å¦             | å¦        |
| æ˜¯å¦å…è®¸ null key | âœ… æ˜¯         | âŒ å¦       | âœ… æ˜¯           | âŒ å¦      |
| æŸ¥è¯¢å¤æ‚åº¦         | å¹³å‡ O(1)     | O(1)      | O(1)          | O(logN)  |
| æ‰©å®¹æœºåˆ¶          | æœ‰           | æœ‰         | ç»§æ‰¿è‡ª HashMap   | âŒ æ—       |
